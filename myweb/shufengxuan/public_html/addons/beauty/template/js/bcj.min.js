/*! grunt 2014-11-13 */
var gmu=gmu||{version:"@version",$:window.Zepto,staticCall:function(a){var b=a.fn,c=[].slice,d=a();return d.length=1,function(a,e){return d[0]=a,b[e].apply(d,c.call(arguments,2))}}(Zepto)};!function(a,b){function c(a,b,c){(a||"").split(i).forEach(function(a){c(a,b)})}function d(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function e(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function f(a,b,c,f){var g,h;return h=e(b),h.ns&&(g=d(h.ns)),a.filter(function(a){return!(!a||h.e&&a.e!==h.e||h.ns&&!g.test(a.ns)||c&&a.cb!==c&&a.cb._cb!==c||f&&a.ctx!==f)})}function g(a,c){return this instanceof g?(c&&b.extend(this,c),this.type=a,this):new g(a,c)}var h=[].slice,i=/\s+/,j=function(){return!1},k=function(){return!0};g.prototype={isDefaultPrevented:j,isPropagationStopped:j,preventDefault:function(){this.isDefaultPrevented=k},stopPropagation:function(){this.isPropagationStopped=k}},a.event={on:function(a,b,d){var f,g=this;return b?(f=this._events||(this._events=[]),c(a,b,function(a,b){var c=e(a);c.cb=b,c.ctx=d,c.ctx2=d||g,c.id=f.length,f.push(c)}),this):this},one:function(a,b,d){var e=this;return b?(c(a,b,function(a,b){var c=function(){return e.off(a,c),b.apply(d||e,arguments)};c._cb=b,e.on(a,c,d)}),this):this},off:function(a,b,d){var e=this._events;return e?a||b||d?(c(a,b,function(a,b){f(e,a,b,d).forEach(function(a){delete e[a.id]})}),this):(this._events=[],this):this},trigger:function(a){var b,c,d,e,i,j=-1;if(!this._events||!a)return this;if("string"==typeof a&&(a=new g(a)),b=h.call(arguments,1),a.args=b,b.unshift(a),c=f(this._events,a.type))for(e=c.length;++j<e;)if((d=a.isPropagationStopped())||!1===(i=c[j]).cb.apply(i.ctx2,b)){d||(a.stopPropagation(),a.preventDefault());break}return this}},a.Event=g}(gmu,gmu.$),function(a,b,c){function d(a){return"[object Object]"===o.call(a)}function e(a,b){a&&Object.keys(a).forEach(function(c){b(c,a[c])})}function f(a){try{a="true"===a?!0:"false"===a?!1:"null"===a?null:+a+""===a?+a:/(?:\{[\s\S]*\}|\[[\s\S]*\])$/.test(a)?JSON.parse(a):a}catch(b){a=c}return a}function g(a){for(var b,d,e={},g=a&&a.attributes,h=g&&g.length;h--;)d=g[h],b=d.name,"data-"===b.substring(0,5)&&(b=b.substring(5),d=f(d.value),d===c||(e[b]=d));return e}function h(e){var f=e.substring(0,1).toLowerCase()+e.substring(1),g=b.fn[f];b.fn[f]=function(f){var g,h,i=n.call(arguments,1),j="string"==typeof f&&f;return b.each(this,function(k,l){if(h=r(l,e)||new a[e](l,d(f)?f:c),"this"===j)return g=h,!1;if(j){if(!b.isFunction(h[j]))throw new Error("组件没有此方法："+j);if(g=h[j].apply(h,i),g!==c&&g!==h)return!1;g=c}}),g!==c?g:this},b.fn[f].noConflict=function(){return b.fn[f]=g,this}}function i(a,c){var d=this;a.superClass&&i.call(d,a.superClass,c),e(r(a,"options"),function(a,e){e.forEach(function(e){var f=e[0],g=e[1];("*"===f||b.isFunction(f)&&f.call(d,c[a])||f===c[a])&&g.call(d)})})}function j(a,d){var f=this;a.superClass&&j.call(f,a.superClass,d),e(r(a,"plugins"),function(a,g){d[a]!==!1&&(e(g,function(a,d){var e;f[a]=b.isFunction(d)&&(e=f[a])?function(){var a,b=f.origin;return f.origin=e,a=d.apply(f,arguments),b===c?delete f.origin:f.origin=b,a}:d}),g._init.call(f))})}function k(){for(var a,c=n.call(arguments),e=c.length;e--;)a=a||c[e],d(c[e])||c.splice(e,1);return c.length?b.extend.apply(null,[!0,{}].concat(c)):a}function l(a,e,f,h,l){var m,n=this;return d(h)&&(l=h,h=c),l&&l.el&&(h=b(l.el)),h&&(n.$el=b(h),h=n.$el[0]),m=n._options=k(e.options,g(h),l),n.template=k(e.template,m.template),n.tpl2html=k(e.tpl2html,m.tpl2html),n.widgetName=a.toLowerCase(),n.eventNs="."+n.widgetName+f,n._init(m),n._options.setup=n.$el&&n.$el.parent()[0]?!0:!1,i.call(n,e,m),j.call(n,e,m),n._create(),n.trigger("ready"),h&&r(h,a,n)&&n.on("destroy",function(){r(h,a,null)}),n}function m(d,f,g){function h(a,b){if("Base"===d)throw new Error("Base类不能直接实例化");return this instanceof h?l.call(this,d,h,i++,a,b):new h(a,b)}"function"!=typeof g&&(g=a.Base);var i=1,j=1;return b.extend(h,{register:function(a,b){var c=r(h,"plugins")||r(h,"plugins",{});return b._init=b._init||p,c[a]=b,h},option:function(a,b,c){var d=r(h,"options")||r(h,"options",{});return d[a]||(d[a]=[]),d[a].push([b,c]),h},inherits:function(a){return m(d+"Sub"+j++,a,h)},extend:function(a){var b=h.prototype,d=g.prototype;q.forEach(function(b){a[b]=k(g[b],a[b]),a[b]&&(h[b]=a[b]),delete a[b]}),e(a,function(a,e){b[a]="function"==typeof e&&d[a]?function(){var b,f=this.$super;return this.$super=function(){var b=n.call(arguments,1);return d[a].apply(this,b)},b=e.apply(this,arguments),f===c?delete this.$super:this.$super=f,b}:e})}}),h.superClass=g,h.prototype=Object.create(g.prototype),h.extend(f),h}var n=[].slice,o=Object.prototype.toString,p=function(){},q=["options","template","tpl2html"],r=function(){var a={},b=0,d="_gid";return function(e,f,g){var h=e[d]||(e[d]=++b),i=a[h]||(a[h]={});return g!==c&&(i[f]=g),null===g&&delete i[f],i[f]}}(),s=a.event;a.define=function(b,c,d){a[b]=m(b,c,d),h(b)},a.isWidget=function(b,c){return c="string"==typeof c?a[c]||p:c,c=c||a.Base,b instanceof c},a.Base=m("Base",{_init:p,_create:p,getEl:function(){return this.$el},on:s.on,one:s.one,off:s.off,trigger:function(c){var d="string"==typeof c?new a.Event(c):c,e=[d].concat(n.call(arguments,1)),f=this._options[d.type],g=this.getEl();return f&&b.isFunction(f)&&!1===f.apply(this,e)&&(d.stopPropagation(),d.preventDefault()),s.trigger.apply(this,e),g&&g.triggerHandler(d,(e.shift(),e)),this},tpl2html:function(a,c){var d=this.template;return d="string"==typeof a?d[a]:(c=a,d),c||~d.indexOf("<%")?b.parseTpl(d,c):d},destroy:function(){this.$el&&this.$el.off(this.eventNs),this.trigger("destroy"),this.off(),this.destroyed=!0}},Object),b.ui=a}(gmu,gmu.$),function(a,b){a.extend(a.fn,{fix:function(c){var d=this;if(d.attr("isFixed"))return d;d.css(c).css("position","fixed").attr("isFixed",!0);var e=a('<div style="position:fixed;top:10px;"></div>').appendTo("body"),f=e[0].getBoundingClientRect().top,g=function(){window.pageYOffset>0&&(e[0].getBoundingClientRect().top!==f&&(d.css("position","absolute"),h(),a(window).on("scrollStop",h),a(window).on("ortchange",h)),a(window).off("scrollStop",g),e.remove())},h=function(){d.css({top:window.pageYOffset+(c.bottom!==b?window.innerHeight-d.height()-c.bottom:c.top||0),left:c.right!==b?document.body.offsetWidth-d.width()-c.right:c.left||0}),"100%"==c.width&&d.css("width",document.body.offsetWidth)};return a(window).on("scrollStop",g),d}})}(Zepto),function(a){a.extend(a,{throttle:function(b,c,d){function e(){function a(){g=Date.now(),c.apply(h,j)}function e(){f=void 0}var h=this,i=Date.now()-g,j=arguments;d&&!f&&a(),f&&clearTimeout(f),void 0===d&&i>b?a():f=setTimeout(d?e:a,void 0===d?b-i:b)}var f,g=0;return"function"!=typeof c&&(d=c,c=b,b=250),e._zid=c._zid=c._zid||a.proxy(c)._zid,e},debounce:function(b,c,d){return void 0===c?a.throttle(250,b,!1):a.throttle(b,c,void 0===d?!1:d!==!1)}})}(Zepto),function(a,b){function c(){a(b).on("scroll",a.debounce(80,function(){a(b).trigger("scrollStop")},!1))}function d(){a(b).off("scroll"),c()}c(),a(b).on("pageshow",function(c){c.persisted&&a(b).off("touchstart",d).one("touchstart",d)})}(Zepto,window),$(function(){$.mediaQuery={ortchange:"screen and (width: "+window.innerWidth+"px)"},$.matchMedia($.mediaQuery.ortchange).addListener(function(){$(window).trigger("ortchange")})}),function(a){a.matchMedia=function(){var b=0,c="gmu-media-detect",d=a.fx.transitionEnd,e=a.fx.cssPrefix,f=a("<style></style>").append("."+c+"{"+e+"transition: width 0.001ms; width: 0; position: absolute; clip: rect(1px, 1px, 1px, 1px);}\n").appendTo("head");return function(e){var g,h,i=c+b++,j=[];return f.append("@media "+e+" { #"+i+" { width: 1px; } }\n"),g=a('<div class="'+c+'" id="'+i+'"></div>').appendTo("body").on(d,function(){h.matches=1===g.width(),a.each(j,function(b,c){a.isFunction(c)&&c.call(h,h)})}),h={matches:1===g.width(),media:e,addListener:function(a){return j.push(a),this},removeListener:function(a){var b=j.indexOf(a);return~b&&j.splice(b,1),this}}}}()}(Zepto),function(a,b,c){a.define("Gotop",{options:{container:"",useFix:!0,useHide:!0,useAnimation:!1,position:{bottom:60,right:10},afterScroll:null},_init:function(){var a,c,d=this,e=d._options;b.os.version&&b.os.version.substr(0,3)>=7&&(e.position.bottom=60),d.on("ready",function(){a=d.$el,c=b.proxy(d._eventHandler,d),e.useHide&&b(document).on("touchmove",c),b(window).on("touchend touchcancel scrollStop",c),b(window).on("scroll ortchange",c),a.on("click",c),d.on("destroy",function(){b(window).off("touchend touchcancel scrollStop",c),b(document).off("touchmove",c),b(window).off("scroll ortchange",c)}),e.useFix&&a.fix(e.position),e.root=a[0]}),d.on("destroy",function(){d.$el.remove()})},_create:function(){var a=this;return a.$el||(a.$el=b("<div></div>")),a.$el.addClass("ui-gotop").append("<div></div>").appendTo(a._options.container||(a.$el.parent().length?"":document.body)),a},_eventHandler:function(a){var b=this;switch(a.type){case"touchmove":b.hide();break;case"scroll":clearTimeout(b._options._TID);break;case"touchend":case"touchcancel":clearTimeout(b._options._TID),b._options._TID=setTimeout(function(){b._check.call(b)},300);break;case"scrollStop":b._check();break;case"ortchange":b._check.call(b);break;case"click":b._scrollTo()}},_check:function(a){var b=this;return(a!==c?a:window.pageYOffset)>document.documentElement.clientHeight?b.show():b.hide(),b},_scrollTo:function(){var a=this,b=window.pageYOffset;return a.hide(),clearTimeout(a._options._TID),a._options.useAnimation?a._options.moveToTop=setInterval(function(){b>1?(window.scrollBy(0,-Math.min(150,b-1)),b-=150):(clearInterval(a._options.moveToTop),a.trigger("afterScroll"))},25,!0):(window.scrollTo(0,1),a.trigger("afterScroll")),a},show:function(){return this._options.root.style.display="block",this},hide:function(){return this._options.root.style.display="none",this}})}(gmu,gmu.$),function(a){var b=[];a.fn.imglazyload=function(c){function d(a){var b=k?window:i.offset(),d=b[l.win[0]],e=b[l.win[1]];return d>=a[l.img[0]]-c.threshold-e&&d<=a[l.img[0]]+a[l.img[1]]}function e(d){var e=a(d),f={},g=e;n||(a.each(e.get(0).attributes,function(){~this.name.indexOf("data-")&&(f[this.name]=this.value)}),g=a("<img />").attr(f)),e.trigger("startload"),g.on("load",function(){!n&&e.replaceWith(g),e.trigger("loadcomplete"),g.off("load")}).on("error",function(){var c=a.Event("error");e.trigger(c),c.defaultPrevented||b.push(d),g.off("error").remove()}).attr("src",e.attr(c.urlName))}function f(){var c,f,g,i;for(c=b.length;c--;)f=a(i=b[c]),g=f.offset(),d(g)&&(h.call(b,c,1),e(i))}function g(){!n&&m&&a(b).append(m)}var h=Array.prototype.splice,c=a.extend({threshold:0,container:window,urlName:"data-url",placeHolder:"",eventName:"scrollStop",innerScroll:!1,isVertical:!0},c),i=a(c.container),j=c.isVertical,k=a.isWindow(i.get(0)),l={win:[j?"scrollY":"scrollX",j?"innerHeight":"innerWidth"],img:[j?"top":"left",j?"height":"width"]},m=a(c.placeHolder).length?a(c.placeHolder):null,n=a(this).is("img");return!k&&(l.win=l.img),b=Array.prototype.slice.call(a(b.reverse()).add(this),0).reverse(),a.isFunction(a.fn.imglazyload.detect)?(g(),this):(a(document).ready(function(){g(),f()}),!c.innerScroll&&a(window).on(c.eventName+" ortchange",function(){f()}),a.fn.imglazyload.detect=f,this)}}(Zepto),function(a,b){a.define("Toolbar",{options:{container:document.body,title:"标题",leftBtns:[],rightBtns:[],fixed:!1},_init:function(){var a,c=this,d=c._options;d.container||(d.container=document.body),c.on("ready",function(){if(a=c.$el,d.fixed){var e,f=(document.getElementById("j").offsetHeight,b('<div class="toolbar_cp"></div>').height(a.offset().height).insertBefore(a).append(a).append(a.clone().css({"z-index":1e3,position:"absolute",top:0}))),g=function(){document.body.scrollTop>b("#j").height()+45?a.css({position:"fixed",top:0}):a.css("position","absolute")};b(window).on("touchmove touchend touchcancel scroll scrollStop",g),b(document).on("touchend touchcancel",e=function(){setTimeout(function(){g()},200)}),c.on("destroy",function(){b(window).off("touchmove touchend touchcancel scroll scrollStop",g),b(document).off("touchend touchcancel",e),a.insertBefore(f),f.remove(),c._removeDom()}),g()}}),c.on("destroy",function(){c._removeDom()})},_create:function(){var a=this,c=a._options,d=a.getEl(),e=b(c.container),f=[],g=a.btnGroups={left:[],right:[]},h=g.left;c.setup||(d&&d.length>0?d.appendTo(e):d=a.$el=b("<div>").appendTo(e)),f=d.children(),$toolbarWrap=d.find(".ui-toolbar-wrap"),0===$toolbarWrap.length?$toolbarWrap=b('<div class="ui-toolbar-wrap"></div>').appendTo(d):f=$toolbarWrap.children(),f.forEach(function(b){$toolbarWrap.append(b),/^[hH]/.test(b.tagName)?(h=g.right,a.title=b):h.push(b)});var i=$toolbarWrap.find(".ui-toolbar-left"),j=$toolbarWrap.find(".ui-toolbar-right");0===i.length&&(i=f.length?b('<div class="ui-toolbar-left">').insertBefore(f[0]):b('<div class="ui-toolbar-left">').appendTo($toolbarWrap),g.left.forEach(function(a){b(a).addClass("ui-toolbar-button"),i.append(a)}),j=b('<div class="ui-toolbar-right">').appendTo($toolbarWrap),g.right.forEach(function(a){b(a).addClass("ui-toolbar-button"),j.append(a)})),d.addClass("ui-toolbar"),b(a.title).length?b(a.title).addClass("ui-toolbar-title"):b('<h1 class="ui-toolbar-title">'+c.title+"</h1>").insertAfter(i),a.btnContainer={left:i,right:j},a.addBtns("left",c.leftBtns),a.addBtns("right",c.rightBtns)},_addBtn:function(a,c){b(c).appendTo(a).addClass("ui-toolbar-button")},addBtns:function(b,c){var d=this,e=d.btnContainer[b],f=Object.prototype.toString;return"[object String]"!=f.call(b)&&(c=b,e=d.btnContainer.right),c.forEach(function(b){b instanceof a.Base&&(b=b.getEl()),d._addBtn(e,b)}),d},show:function(){var a=this;return a.$el.show(),a.trigger("show"),a.isShowing=!0,a},hide:function(){var a=this;return a.$el.hide(),a.trigger("hide"),a.isShowing=!1,a},toggle:function(){var a=this;return a.isShowing===!1?a.show():a.hide(),a},_removeDom:function(){var a=this,b=a.$el;a._options.setup===!1?b.remove():b.css("position","static").css("top","auto")}})}(gmu,gmu.$),function(a){a.Toolbar.register("position",{position:function(a){return this.$el.fix(a),this}})}(gmu,gmu.$),function(a){function b(){var a=c.attr("hl-cls");clearTimeout(d),c.removeClass(a).removeAttr("hl-cls"),c=null,e.off("touchend touchmove touchcancel",b)}var c,d,e=a(document);a.fn.highlight=function(f,g){return this.each(function(){var h=a(this);h.css("-webkit-tap-highlight-color","rgba(255,255,255,0)").off("touchstart.hl"),f&&h.on("touchstart.hl",function(i){var j;c=g?(j=a(i.target).closest(g,this))&&j.length&&j:h,c&&(c.attr("hl-cls",f),d=setTimeout(function(){c.addClass(f)},100),e.on("touchend touchmove touchcancel",b))})})}}(Zepto),function(a){function b(a){return"tagName"in a?a:a.parentNode}function c(a,b,c,d){var e=Math.abs(a-b),f=Math.abs(c-d);return e>=f?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function d(){j=null,k.last&&(k.el.trigger("longTap"),k={})}function e(){j&&clearTimeout(j),j=null}function f(){g&&clearTimeout(g),h&&clearTimeout(h),i&&clearTimeout(i),j&&clearTimeout(j),g=h=i=j=null,k={}}var g,h,i,j,k={},l=750;a(document).ready(function(){var m,n;a(document.body).bind("touchstart",function(c){m=Date.now(),n=m-(k.last||m),k.el=a(b(c.touches[0].target)),g&&clearTimeout(g),k.x1=c.touches[0].pageX,k.y1=c.touches[0].pageY,n>0&&250>=n&&(k.isDoubleTap=!0),k.last=m,j=setTimeout(d,l)}).bind("touchmove",function(a){e(),k.x2=a.touches[0].pageX,k.y2=a.touches[0].pageY,Math.abs(k.x1-k.x2)>10&&a.preventDefault()}).bind("touchend",function(){e(),k.x2&&Math.abs(k.x1-k.x2)>30||k.y2&&Math.abs(k.y1-k.y2)>30?i=setTimeout(function(){k.el.trigger("swipe"),k.el.trigger("swipe"+c(k.x1,k.x2,k.y1,k.y2)),k={}},0):"last"in k&&(h=setTimeout(function(){var b=a.Event("tap");b.cancelTouch=f,k.el.trigger(b),k.isDoubleTap?(k.el.trigger("doubleTap"),k={}):g=setTimeout(function(){g=null,k.el.trigger("singleTap"),k={}},250)},0))}).bind("touchcancel",f),a(window).bind("scroll",f)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(b){a.fn[b]=function(a){return this.bind(b,a)}})}(Zepto),function(a){function b(b){return this.each(function(c){var e=a(this),f=a.isFunction(b)?b.call(this,c,e.offset()):b,g=e.css("position"),h="absolute"===g||"fixed"===g||e.position();"relative"===g&&(h.top-=parseFloat(e.css("top"))||-1*parseFloat(e.css("bottom"))||0,h.left-=parseFloat(e.css("left"))||-1*parseFloat(e.css("right"))||0),parentOffset=e.offsetParent().offset(),props={top:d(f.top-(h.top||0)-parentOffset.top),left:d(f.left-(h.left||0)-parentOffset.left)},"static"==g&&(props.position="relative"),f.using?f.using.call(this,props,c):e.css(props)})}var c=a.fn.offset,d=Math.round;a.fn.offset=function(a){return a?b.call(this,a):c.call(this)}}(Zepto),function(a){a.parseTpl=function(a,b){var c="var __p=[];with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(a,b){return"',"+b.replace(/\\'/,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(a,b){return"');"+b.replace(/\\'/,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+'\');}return __p.join("");',d=new Function("obj",c);return b?d(b):d}}(Zepto),function(a,b,c){a.define("Popover",{options:{container:null,content:null,event:"click"},template:{frame:"<div>"},_create:function(){var a=this,c=a._options,d=c.target&&b(c.target)||a.getEl(),e=c.container&&b(c.container);e&&e.length||(e=b(a.tpl2html("frame")).addClass("ui-mark-temp")),a.$root=e,c.content&&a.setContent(c.content),a.trigger("done.dom",e.addClass("ui-"+a.widgetName),c),e.parent().length||d.after(e),a.target(d)},_checkTemp:function(a){a.is(".ui-mark-temp")&&a.off(this.eventNs)&&a.remove()},show:function(){var b=this,c=a.Event("beforeshow");return b.trigger(c),c.isDefaultPrevented()?void 0:(b.trigger("placement",b.$root.addClass("ui-in"),b.$target),b._visible=!0,b.trigger("show"))},hide:function(){var b=this,c=new a.Event("beforehide");return b.trigger(c),c.isDefaultPrevented()?void 0:(b.$root.removeClass("ui-in"),b._visible=!1,b.trigger("hide"))},toggle:function(){var a=this;return a[a._visible?"hide":"show"].apply(a,arguments)},target:function(a){if(a===c)return this.$target;var d=this,e=b(a),f=d.$target,g=d._options.event+d.eventNs;return f&&f.off(g),d.$target=e.on(g,function(a){a.preventDefault(),d.toggle()}),d},setContent:function(a){var b=this.$root;return b.empty().append(a),this},destroy:function(){var a=this;return a.$target.off(a.eventNs),a._checkTemp(a.$root),a.$super("destroy")}})}(gmu,gmu.$),function(a){var b=a.Popover;b.template.arrow='<span class="ui-arrow"></span>',b.options.arrow=!0,b.option("arrow",!0,function(){var a=this,b=a._options;b.offset=b.offset||function(a,b){return b=b.split("_")[0],{left:15*("left"===b?-1:"right"===b?1:0),top:15*("top"===b?-1:"bottom"===b?1:0)}},a.on("done.dom",function(b,c){c.append(a.tpl2html("arrow")).addClass("ui-pos-default")}),a.on("after.placement",function(a,b,c){var d=this.$root[0],e=d.className,f=c.placement,g=c.align||"";d.className=e.replace(/(?:\s|^)ui-pos-[^\s$]+/g,"")+" ui-pos-"+f+(g?"-"+g:"")})})}(gmu),function(a,b){var c=a.Popover;c.options.dismissible=!0,c.option("dismissible",!0,function(){function a(a){for(var d=c.$target.add(c.$root).get(),e=d.length;e--;)if(d[e]===a||b.contains(d[e],a))return!0;return!1}var c=this,d=b(document),e="click"+c.eventNs;c.on("show",function(){d.off(e).on(e,function(b){a(b.target)||c.hide()})}),c.on("hide",function(){d.off(e)})})}(gmu,gmu.$),function(a,b){a.define("Dropmenu",{options:{content:null},template:{item:'<li><a <% if ( href ) { %>href="<%= href %>"<% } %>><% if ( icon ) { %><span class="ui-icon ui-icon-<%= icon %>"></span><% } %><%= text %></a></li>',divider:'<li class="divider"></li>',wrap:"<ul>"},_init:function(){var a=this;a.on("done.dom",function(b,c){a.$list=c.find("ul").first().addClass("ul_v").highlight("ui-state-hover",".ul_v>li:not(.divider)")})},_create:function(){var c=this,d=c._options,e="";"array"===b.type(d.content)&&(d.content.forEach(function(a){a=b.extend({href:"",icon:"",text:""},"string"==typeof a?{text:a}:a),e+=c.tpl2html("divider"===a.text?"divider":"item",a)}),d.content=b(c.tpl2html("wrap")).append(e)),c.$super("_create"),c.$list.on("click"+c.eventNs,".ul_v>li:not(.ui-state-disable):not(.divider)",function(b){var d=a.Event("itemclick",b);c.trigger(d,this),d.isDefaultPrevented()||c.hide()})}},a.Popover)}(gmu,gmu.$),function(a,b){b.extend(a.Dropmenu.options,{placement:"bottom",align:"center",offset:null}),a.Dropmenu.option("placement",function(a){return~["top","bottom"].indexOf(a)},function(){function a(a,b){return"right"===a||"bottom"===a?b:"center"===a?b/2:0}function c(b,c,e,f,g){var h=d.of,i=d.coord,j=d.offset,k=h.top,l=h.left;return l+=a(c,h.width)-a(f,i.width),k+=a(e,h.height)-a(g,i.height),j="function"==typeof j?j.call(null,{left:l,top:k},b):j||{},{left:l+(j.left||0),top:k}}var d,e={top_center:"center top center bottom",top_left:"left top left bottom",top_right:"right top right bottom",bottom_center:"center bottom center top",bottom_right:"right bottom right top",bottom_left:"left bottom left top"},f={};b.each(e,function(a,b){b=b.split(/\s/g),b.unshift(a),f[a]=function(){return c.apply(null,b)}}),this.on("placement",function(a,b,c){var e,g=this,h=g._options,i=h.placement,j=h.align;d={coord:b.offset(),of:c.offset(),placement:i,align:j,$el:b,$of:c,offset:h.offset},e=f[i+"_"+j](),g.trigger("before.placement",e,d,f),/^(\w+)_(\w+)$/.test(d.preset)&&(d.placement=RegExp.$1,d.align=RegExp.$2),b.offset(e),g.trigger("after.placement",e,d)})})}(gmu,gmu.$),function(a,b,c){var d={close:'<a class="ui-dialog-close" title="关闭"><span class="ui-icon ui-icon-delete"></span></a>',mask:'<div class="ui-mask"></div>',title:'<div class="ui-dialog-title"><h3><%=title%></h3></div>',wrap:'<div class="ui-dialog"><div class="ui-dialog-content"></div><% if(btns){ %><div class="ui-dialog-btns"><% for(var i=0, length=btns.length; i<length; i++){var item = btns[i]; %><a class="ui-btn ui-btn-<%=item.index%>" data-key="<%=item.key%>"><%=item.text%></a><% } %></div><% } %></div> '};a.define("Dialog",{options:{autoOpen:!0,buttons:null,closeBtn:!0,mask:!0,width:300,height:"auto",title:null,content:null,scrollMove:!0,container:null,maskClick:null,position:null},getWrap:function(){return this._options._wrap},_init:function(){var a,c=this,e=c._options,f=0,g=b.proxy(c._eventHandler,c),h={};c.on("ready",function(){e._container=b(e.container||document.body),(e._cIsBody=e._container.is("body"))||e._container.addClass("ui-dialog-container"),h.btns=a=[],e.buttons&&b.each(e.buttons,function(b){a.push({index:++f,text:b,key:b})}),e._mask=e.mask?b(d.mask).appendTo(e._container):null,e._wrap=b(b.parseTpl(d.wrap,h)).appendTo(e._container),e._content=b(".ui-dialog-content",e._wrap),e._title=b(d.title),e._close=e.closeBtn&&b(d.close).highlight("ui-dialog-close-hover"),c.$el=c.$el||e._content,c.title(e.title),c.content(e.content),a.length&&b(".ui-dialog-btns .ui-btn",e._wrap).highlight("ui-state-hover"),e._wrap.css({width:e.width,height:e.height}),b(window).on("ortchange",g),e._wrap.on("click",g),e._mask&&e._mask.on("click",g),e.autoOpen&&c.open()})},_create:function(){var a=this._options;this._options.setup&&(a.content=a.content||this.$el.show(),a.title=a.title||this.$el.attr("title"))},_eventHandler:function(a){var c,d,e,f=this,g=f._options;switch(a.type){case"ortchange":this.refresh();break;case"touchmove":g.scrollMove&&a.preventDefault();break;case"click":if(g._mask&&(b.contains(g._mask[0],a.target)||g._mask[0]===a.target))return f.trigger("maskClick");d=g._wrap.get(0),(c=b(a.target).closest(".ui-dialog-close",d))&&c.length?f.close():(c=b(a.target).closest(".ui-dialog-btns .ui-btn",d))&&c.length&&(e=g.buttons[c.attr("data-key")],e&&e.apply(f,arguments))}},_calculate:function(){var a,c,d=this,e=d._options,f=document.body,g={},h=e._cIsBody,i=Math.round;return e.mask&&(g.mask=h?{width:"100%",height:Math.max(f.scrollHeight,f.clientHeight)-1}:{width:"100%",height:"100%"}),a=e._wrap.offset(),c=b(window),g.wrap={left:"50%",marginLeft:-i(a.width/2)+"px",top:h?i(c.height()/2)+window.pageYOffset:"50%",marginTop:-i(a.height/2)+"px"},g},refresh:function(){var a,c,d=this,e=d._options;return e._isOpen&&(c=function(){a=d._calculate(),a.mask&&e._mask.css(a.mask),e._wrap.css(a.wrap)},b.os.ios&&document.activeElement&&/input|textarea|select/i.test(document.activeElement.tagName)?(document.body.scrollLeft=0,setTimeout(c,200)):c()),d},open:function(a,d){var e=this._options;return e._isOpen=!0,e._wrap.css("display","block"),e._mask&&e._mask.css("display","block"),a!==c&&this.position?this.position(a,d):this.refresh(),b(document).on("touchmove",b.proxy(this._eventHandler,this)),this.trigger("open")},close:function(){var a,c=this._options;return a=b.Event("beforeClose"),this.trigger(a),a.defaultPrevented?this:(c._isOpen=!1,c._wrap.css("display","none"),c._mask&&c._mask.css("display","none"),b(document).off("touchmove",this._eventHandler),this.trigger("close"))},title:function(a){var b=this._options,d=a!==c;return d&&(a=(b.title=a)?"<h3>"+a+"</h3>":a,b._title.html(a)[a?"prependTo":"remove"](b._wrap),b._close&&b._close.prependTo(b.title?b._title:b._wrap)),d?this:b.title},content:function(a){var b=this._options,d=a!==c;return d&&b._content.empty().append(b.content=a),d?this:b.content},destroy:function(){var a=this._options,c=this._eventHandler;return b(window).off("ortchange",c),b(document).off("touchmove",c),a._wrap.off("click",c).remove(),a._mask&&a._mask.off("click",c).remove(),a._close&&a._close.highlight(),this.$super("destroy")}})}(gmu,gmu.$);