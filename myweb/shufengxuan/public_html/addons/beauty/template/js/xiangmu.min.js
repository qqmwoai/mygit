/*! grunt 2014-11-06 */
!function(a,b,c){a.define("Refresh",{options:{load:null,statechange:null},_init:function(){var a=this,c=a._options;a.on("ready",function(){b.each(["up","down"],function(b,d){var e=c["$"+d+"Elem"],f=e.get(0);e.length&&(a._status(d,!0),(!f.childNodes.length||e.find(".ui-refresh-icon").length&&e.find(".ui-refresh-label").length)&&(!f.childNodes.length&&a._createBtn(d),c.refreshInfo||(c.refreshInfo={}),c.refreshInfo[d]={$icon:e.find(".ui-refresh-icon"),$label:e.find(".ui-refresh-label"),text:e.find(".ui-refresh-label").html()}),e.on("click",function(){a._status(d)&&!c._actDir&&(a._setStyle(d,"loading"),a._loadingAction(d,"click"))}))})}),a.on("destroy",function(){a.$el.remove()})},_create:function(){var a=this,b=a._options,c=a.$el;a._options.setup&&(b.$upElem=c.find(".ui-refresh-up"),b.$downElem=c.find(".ui-refresh-down"),c.addClass("ui-refresh"))},_createBtn:function(a){return this._options["$"+a+"Elem"].html('<span class="ui-refresh-icon"></span><span class="ui-refresh-label">加载更多</span>'),this},_setStyle:function(a,c){var d=this,e=b.Event("statechange");return d.trigger(e,d._options["$"+a+"Elem"],c,a),e.defaultPrevented?d:d._changeStyle(a,c)},_changeStyle:function(a,b){var c=this._options,d=c.refreshInfo[a];switch(b){case"loaded":d.$label.html(d.text),d.$icon.removeClass(),c._actDir="";break;case"loading":d.$label.html("加载中..."),d.$icon.addClass("ui-loading"),c._actDir=a;break;case"disable":d.$label.html("没有更多内容了")}return this},_loadingAction:function(a,c){var d=this,e=d._options,f=e.load;return b.isFunction(f)&&f.call(d,a,c),d._status(a,!1),d},afterDataLoading:function(a){var b=this,a=a||b._options._actDir;return b._setStyle(a,"loaded"),b._status(a,!0),b},_status:function(a,b){var d=this._options;return b===c?d["_"+a+"Open"]:d["_"+a+"Open"]=!!b},_setable:function(a,c,d){var e=this,f=e._options,g=c?[c]:["up","down"];return b.each(g,function(b,c){var g=f["$"+c+"Elem"];g.length&&(a?g.show():d?g.hide():e._setStyle(c,"disable"),e._status(c,a))}),e},disable:function(a,b){return this._setable(!1,a,b)},enable:function(a){return this._setable(!0,a)}})}(gmu,gmu.$),function(a,b){a.Refresh.register("lite",{_init:function(){var a=this,c=a._options,d=a.$el;return c.seamless&&b(document).on("scrollStop",b.proxy(a._eventHandler,a)),d.on("touchstart touchmove touchend touchcancel",b.proxy(a._eventHandler,a)),c.wrapperH=d.height(),c.wrapperTop=d.offset().top,c._win=window,c._body=document.body,a},_changeStyle:function(a,b){var c=this,d=c._options.refreshInfo[a];return"beforeload"==b&&(d.$icon.removeClass("ui-loading"),d.$label.html("松开立即加载")),c.origin(a,b)},_startHandler:function(a){this._options._startY=a.touches[0].pageY},_moveHandler:function(a){var b=this,c=b._options,d=c._startY,e=d-a.touches[0].pageY,f=c._win.innerHeight,g=c.threshold||(c.wrapperH<f?c.wrapperH/2+c.wrapperTop||0:f/2);if(b._status("down")&&!(0>e))return!c._refreshing&&d>=c._body.scrollHeight-f+g&&e>10&&(b._setStyle("down","beforeload"),c._refreshing=!0),b},_endHandler:function(){var a=this,b=a._options;return a._setStyle("down","loading"),a._loadingAction("down","pull"),b._refreshing=!1,a},_eventHandler:function(a){var b=this,c=b._options;switch(a.type){case"touchstart":b._startHandler(a);break;case"touchmove":clearTimeout(c._endTimer),c._endTimer=setTimeout(function(){b._endHandler()},300),b._moveHandler(a);break;case"touchend":case"touchcancel":clearTimeout(c._endTimer),c._refreshing&&b._endHandler();break;case"scrollStop":!c._refreshing&&c._win.pageYOffset>=c._body.scrollHeight-c._win.innerHeight+(c.threshold||-1)&&b._endHandler()}return b}})}(gmu,gmu.$),function(a,b,c){var d=1,e=function(){return d++},f=/^#(.+)$/;a.define("Tabs",{options:{active:0,items:null,transition:"slide"},template:{nav:'<ul class="ui-tabs-nav"><% var item; for(var i=0, length=items.length; i<length; i++) { item=items[i]; %><li<% if(i==active){ %> class="ui-state-active"<% } %>><a href="javascript:;"><%=item.title%></a></li><% } %></ul>',content:'<div class="ui-viewport ui-tabs-content"><% var item; for(var i=0, length=items.length; i<length; i++) { item=items[i]; %><div<% if(item.id){ %> id="<%=item.id%>"<% } %> class="ui-tabs-panel <%=transition%><% if(i==active){ %> ui-state-active<% } %>"><%=item.content%></div><% } %></div>'},_init:function(){var a,c=this,d=c._options,e=b.proxy(c._eventHandler,c);c.on("ready",function(){a=c.$el,a.addClass("ui-tabs"),d._nav.on("tap",e).children().highlight("ui-state-hover")}),b(window).on("ortchange",e)},_create:function(){var a=this,c=a._options;a._options.setup&&a.$el.children().length>0?a._prepareDom("setup",c):(c.setup=!1,a.$el=a.$el||b("<div></div>"),a._prepareDom("create",c))},_prepareDom:function(a,c){var d,g,h,i,j=this,k=j.$el;switch(a){case"setup":if(c._nav=j._findElement("ul").first(),c._nav){c._content=j._findElement("div.ui-tabs-content"),c._content=(c._content&&c._content.first()||b("<div></div>").appendTo(k)).addClass("ui-viewport ui-tabs-content"),d=[],c._nav.addClass("ui-tabs-nav").children().each(function(){var a,g,h=j._findElement("a",this),i=h?h.attr("href"):b(this).attr("data-url");a=f.test(i)?RegExp.$1:"tabs_"+e(),(g=j._findElement("#"+a)||b('<div id="'+a+'"></div>')).addClass("ui-tabs-panel"+(c.transition?" "+c.transition:"")).appendTo(c._content),d.push({id:a,href:i,title:h?h.attr("href","javascript:;").text():b(this).text(),content:g})}),c.items=d,c.active=Math.max(0,Math.min(d.length-1,c.active||b(".ui-state-active",c._nav).index()||0)),j._getPanel().add(c._nav.children().eq(c.active)).addClass("ui-state-active");break}default:d=c.items=c.items||[],g=[],h=[],c.active=Math.max(0,Math.min(d.length-1,c.active)),b.each(d,function(a,b){i="tabs_"+e(),g.push({href:b.href||"#"+i,title:b.title}),h.push({content:b.content||"",id:i}),d[a].id=i}),c._nav=b(this.tpl2html("nav",{items:g,active:c.active})).prependTo(k),c._content=b(this.tpl2html("content",{items:h,active:c.active,transition:c.transition})).appendTo(k),c.container=c.container||(k.parent().length?null:"body")}c.container&&k.appendTo(c.container),j._fitToContent(j._getPanel())},_getPanel:function(a){var d=this._options;return b("#"+d.items[a===c?d.active:a].id)},_findElement:function(a,c){var d=b(c||this.$el).find(a);return d.length?d:null},_eventHandler:function(a){var c,d=this._options;switch(a.type){case"ortchange":this.refresh();break;default:(c=b(a.target).closest("li",d._nav.get(0)))&&c.length&&(a.preventDefault(),this.switchTo(c.index()))}},_fitToContent:function(){var a=this._options,b=a._content;return a._plus===c&&(a._plus=parseFloat(b.css("border-top-width"))+parseFloat(b.css("border-bottom-width"))),b.height(),this},switchTo:function(c){var d,e,f,g,h,i=this,j=i._options,k=j.items;if(!j._buzy&&j.active!=(c=Math.max(0,Math.min(k.length-1,c)))){if(e=b.extend({},k[c]),e.div=i._getPanel(c),e.index=c,f=b.extend({},k[j.active]),f.div=i._getPanel(),f.index=j.active,d=a.Event("beforeActivate"),i.trigger(d,e,f),d.isDefaultPrevented())return i;j._content.children().removeClass("ui-state-active"),e.div.addClass("ui-state-active"),j._nav.children().removeClass("ui-state-active").eq(e.index).addClass("ui-state-active"),j.transition&&(j._buzy=!0,h=b.fx.animationEnd+".tabs",g=c>j.active?"":" reverse",j._content.addClass("ui-viewport-transitioning"),f.div.addClass("out"+g),e.div.addClass("in"+g).on(h,function(a){a.target==a.currentTarget&&(e.div.off(h,arguments.callee),j._buzy=!1,f.div.removeClass("out reverse"),e.div.removeClass("in reverse"),j._content.removeClass("ui-viewport-transitioning"),i.trigger("animateComplete",e,f),i._fitToContent(e.div))})),j.active=c,i.trigger("activate",e,f),j.transition||i._fitToContent(e.div)}return i},refresh:function(){return this._fitToContent(this._getPanel())},destroy:function(){var a=this._options,b=this._eventHandler;return a._nav.off("tap",b).children().highlight(),a.swipe&&a._content.off("swipeLeft swipeRight",b),a.setup||this.$el.remove(),this.$super("destroy")}})}(gmu,gmu.$),function(a,b){var c=b.fx.cssPrefix,d=b.fx.transitionEnd,e=" translateZ(0)";a.define("Slider",{options:{loop:!1,speed:400,index:0,selector:{container:".ui-slider-group"}},template:{item:'<div class="ui-slider-item"><a href="<%= href %>"><img style="width:100%" src="<%= pic %>" alt="" /></a><% if( title ) { %><p><%= title %></p><% } %></div>'},_create:function(){var a=this,c=a.getEl(),e=a._options;a.index=e.index,a._initDom(c,e),a._initWidth(c,a.index),a._container.on(d+a.eventNs,b.proxy(a._tansitionEnd,a)),b(window).on("ortchange"+a.eventNs,function(){a._initWidth(c,a.index)})},_initDom:function(a,c){var d,e,f=c.selector,g=c.viewNum||1;for(e=a.find(f.container),e.length||(e=b("<div></div>"),c.content?this._createItems(e,c.content):a.is("ul")?(this.$el=e.insertAfter(a),e=a,a=this.$el):e.append(a.children()),e.appendTo(a)),(d=e.children()).length<g+1&&(c.loop=!1);c.loop&&e.children().length<3*g;)e.append(d.clone());this.length=e.children().length,this._items=(this._container=e).addClass("ui-slider-group").children().addClass("ui-slider-item").toArray(),this.trigger("done.dom",a.addClass("ui-slider"),c)},_createItems:function(a,b){for(var c=0,d=b.length;d>c;c++)a.append(this.tpl2html("item",b[c]))},_initWidth:function(a,b,c){var d,e=this;(c||(d=a.width())!==e.width)&&(e.width=d,e._arrange(d,b),e.trigger("width.change"))},_arrange:function(a,b){var c,d,e=this._items,f=0;for(this._slidePos=new Array(e.length),d=e.length;d>f;f++)c=e[f],c.style.cssText+="width:"+a+"px;left:"+f*-a+"px;",c.setAttribute("data-index",f),this._move(f,b>f?-a:f>b?a:0,0);this._container.css("width",a*d)},_move:function(a,b,c,d){var e=this._slidePos,f=this._items;e[a]!==b&&f[a]&&(this._translate(a,b,c),e[a]=b,d&&f[a].clientLeft)},_translate:function(a,b,d){var f=this._items[a],g=f&&f.style;return g?void(g.cssText+=c+"transition-duration:"+d+"ms;"+c+"transform: translate("+b+"px, 0)"+e+";"):!1},_circle:function(a,b){var c;return b=b||this._items,c=b.length,(a%c+c)%b.length},_tansitionEnd:function(a){~~a.target.getAttribute("data-index")===this.index&&this.trigger("slideend",this.index)},_slide:function(a,b,c,d,e,f){var g,h=this;return g=h._circle(a-c*b),f.loop||(c=Math.abs(a-g)/(a-g)),this._move(g,-c*d,0,!0),this._move(a,d*c,e),this._move(g,0,e),this.index=g,this.trigger("slide",g,a)},slideTo:function(a,b){if(this.index===a||this.index===this._circle(a))return this;var c=this._options,d=this.index,e=Math.abs(d-a),f=e/(d-a),g=this.width;return b=b||c.speed,this._slide(d,e,f,g,b,c)},prev:function(){return(this._options.loop||this.index>0)&&this.slideTo(this.index-1),this},next:function(){return(this._options.loop||this.index+1<this.length)&&this.slideTo(this.index+1),this},getIndex:function(){return this.index},destroy:function(){return this._container.off(this.eventNs),b(window).off("ortchange"+this.eventNs),this.$super("destroy")}})}(gmu,gmu.$),function(a,b){b.extend(!0,a.Slider,{template:{dots:'<p class="ui-slider-dots"><%= new Array( len + 1 ).join("<b></b>") %></p>'},options:{dots:!0,selector:{dots:".ui-slider-dots"}}}),a.Slider.option("dots",!0,function(){var c=function(b,c){var d=this._dots;"undefined"==typeof c||a.staticCall(d[c%this.length],"removeClass","ui-state-active"),a.staticCall(d[b%this.length],"addClass","ui-state-active")};this.on("done.dom",function(a,c,d){var e=c.find(d.selector.dots);e.length||(e=this.tpl2html("dots",{len:this.length}),e=b(e).appendTo(c)),this._dots=e.children().toArray()}),this.on("slide",function(a,b,d){c.call(this,b,d)}),this.on("ready",function(){c.call(this,this.index)})})}(gmu,gmu.$),function(a,b,c){var d,e,f,g,h={touchstart:"_onStart",touchmove:"_onMove",touchend:"_onEnd",touchcancel:"_onEnd",click:"_onClick"};b.extend(a.Slider.options,{stopPropagation:!1,disableScroll:!1}),a.Slider.register("touch",{_init:function(){var a=this,b=a.getEl();a._handler=function(b){return a._options.stopPropagation&&b.stopPropagation(),h[b.type]&&a[h[b.type]].call(a,b)},a.on("ready",function(){b.on("touchstart"+a.eventNs,a._handler),a._container.on("click"+a.eventNs,a._handler)})},_onClick:function(){return!g},_onStart:function(a){if(a.touches.length>1)return!1;var b,h=this,i=a.touches[0],j=h._options,k=h.eventNs;e={x:i.pageX,y:i.pageY,time:+new Date},f={},g=!1,d=c,b=j.viewNum||1,h._move(j.loop?h._circle(h.index-b):h.index-b,-h.width,0,!0),h._move(j.loop?h._circle(h.index+b):h.index+b,h.width,0,!0),h.$el.on("touchmove"+k+" touchend"+k+" touchcancel"+k,h._handler)},_onMove:function(a){if(a.touches.length>1||a.scale&&1!==a.scale)return!1;var b,c,h,i,j=this._options,k=j.viewNum||1,l=a.touches[0],m=this.index;if(j.disableScroll&&a.preventDefault(),f.x=l.pageX-e.x,f.y=l.pageY-e.y,"undefined"==typeof d&&(d=Math.abs(f.x)<Math.abs(f.y)),!d){for(a.preventDefault(),j.loop||(f.x/=!m&&f.x>0||m===this._items.length-1&&f.x<0?Math.abs(f.x)/this.width+1:1),i=this._slidePos,b=m-k,c=m+2*k;c>b;b++)h=j.loop?this._circle(b):b,this._translate(h,f.x+i[h],0);g=!0}},_onEnd:function(){if(this.$el.off("touchmove"+this.eventNs+" touchend"+this.eventNs+" touchcancel"+this.eventNs,this._handler),g){var a,b,c,d,h,i=this,j=i._options,k=j.viewNum||1,l=i.index,m=i._slidePos,n=+new Date-e.time,o=Math.abs(f.x),p=!j.loop&&(!l&&f.x>0||l===m.length-k&&f.x<0),q=f.x>0?1:-1;if(250>n?(a=o/n,b=Math.min(Math.round(a*k*1.2),k)):b=Math.round(o/(i.perWidth||i.width)),b&&!p)i._slide(l,b,q,i.width,j.speed,j,!0),k>1&&n>=250&&Math.ceil(o/i.perWidth)!==b&&(i.index<l?i._move(i.index-1,-i.perWidth,j.speed):i._move(i.index+k,i.width,j.speed));else for(c=l-k,d=l+2*k;d>c;c++)h=j.loop?i._circle(c):c,i._translate(h,m[h],j.speed)}}})}(gmu,gmu.$),function(a,b){b.extend(!0,a.Slider,{options:{autoPlay:!0,interval:4e3}}),a.Slider.register("autoplay",{_init:function(){var a=this;a.on("slideend ready",a.resume).on("destory",a.stop),a.getEl().on("touchstart"+a.eventNs,b.proxy(a.stop,a)).on("touchend"+a.eventNs,b.proxy(a.resume,a))},resume:function(){var a=this,b=a._options;return b.autoPlay&&!a._timer&&(a._timer=setTimeout(function(){a.slideTo(a.index+1),a._timer=null},b.interval)),a},stop:function(){var a=this;return a._timer&&(clearTimeout(a._timer),a._timer=null),a}})}(gmu,gmu.$),function(a){a.Slider.template.item='<div class="ui-slider-item"><a href="<%= href %>"><img lazyload="<%= pic %>" alt="" /></a><% if( title ) { %><p><%= title %></p><% } %></div>',a.Slider.register("lazyloadimg",{_init:function(){this.on("ready slide",this._loadItems)},_loadItems:function(){var a,b,c=this._options,d=c.loop,e=c.viewNum||1,f=this.index;for(a=f-e,b=f+2*e;b>a;a++)this.loadImage(d?this._circle(a):a)},loadImage:function(b){var c,d=this._items[b];return d&&(c=a.staticCall(d,"find","img[lazyload]"),c.length)?void c.each(function(){this.src=this.getAttribute("lazyload"),this.removeAttribute("lazyload")}):this}})}(gmu),function(a){a.Slider.options.imgZoom=!0,a.Slider.option("imgZoom",function(){return!!this._options.imgZoom},function(){function a(){d&&d.off("load"+e.eventNs,c)}function b(){a(),d=e._container.find(f).on("load"+e.eventNs,c)}function c(a){var b=a.target||this,c=Math.min(1,e.width/b.naturalWidth,e.height/b.naturalHeight);b.style.width=c*b.naturalWidth+"px"}var d,e=this,f=e._options.imgZoom;f="string"==typeof f?f:"img",e.on("ready dom.change",b),e.on("width.change",function(){d&&d.each(c)}),e.on("destroy",a)})}(gmu);